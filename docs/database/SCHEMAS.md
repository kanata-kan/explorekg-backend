# ðŸ“Š Schemas - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø®Ø·Ø·Ø§Øª

## ðŸ“‹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [Guest Schema](#-guest-schema)
- [Booking Schema](#-booking-schema)
- [BookingCounter Schema](#-bookingcounter-schema)
- [TravelPack Schema](#-travelpack-schema)
- [Activity Schema](#-activity-schema)
- [Car Schema](#-car-schema)
- [PackRelation Schema](#-packrelation-schema)

---

## ðŸ‘¤ Guest Schema

```javascript
{
  sessionId: { type: String, required: true, unique: true },
  email: { type: String, required: true },
  name: { type: String, required: true },
  phone: { type: String },
  expiresAt: { type: Date, default: () => Date.now() + 86400000 }
}
```

**Indexes**: sessionId (unique), expiresAt (TTL)

---

## ðŸ“… Booking Schema

```javascript
{
  bookingNumber: { type: String, required: true, unique: true },
  guestId: { type: ObjectId, ref: 'Guest', required: true },
  itemType: { type: String, enum: ['TRAVEL_PACK', 'ACTIVITY', 'CAR'] },
  snapshot: { type: Object, required: true },
  startDate: Date,
  endDate: Date,
  numberOfPersons: Number,
  totalPrice: Number,
  status: { type: String, enum: ['pending', 'confirmed', 'cancelled', 'expired'] },
  paymentStatus: { type: String, enum: ['unpaid', 'paid', 'refunded', 'failed'] }
}
```

**Indexes**: bookingNumber (unique), guestId, createdAt (TTL)

---

## ðŸ”¢ BookingCounter Schema

```javascript
{
  date: { type: String, required: true, unique: true }, // YYYYMMDD
  count: { type: Number, default: 0 }
}
```

**Atomic Operations**: findOneAndUpdate with $inc

---

## ðŸŽ’ TravelPack Schema

```javascript
{
  localeGroupId: { type: String, required: true },
  language: { type: String, required: true },
  title: String,
  description: String,
  price: Number,
  duration: String,
  category: String,
  imageUrl: String,
  highlights: [String],
  included: [String],
  excluded: [String]
}
```

**Indexes**: { localeGroupId: 1, language: 1 }

---

## ðŸŽ¯ Activity Schema

```javascript
{
  localeGroupId: String,
  language: String,
  title: String,
  description: String,
  price: Number,
  duration: String,
  difficulty: String,
  groupSize: Number
}
```

---

## ðŸš— Car Schema

```javascript
{
  localeGroupId: String,
  language: String,
  brand: String,
  model: String,
  year: Number,
  seats: Number,
  transmission: String,
  pricePerDay: Number,
  available: Boolean
}
```

---

## ðŸ”— PackRelation Schema

```javascript
{
  sourcePack: { type: ObjectId, ref: 'TravelPack' },
  linkedPack: { type: ObjectId, ref: 'TravelPack' },
  relationType: { type: String, enum: ['recommended', 'alternative', 'combo'] }
}
```

---

_ðŸ“˜ Auto-generated by Copilot Documentation Architect â€” ExploreKG Server Project_
