# ğŸ“… Booking Model - Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª

## ğŸ“‹ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

- [Schema](#-schema)
- [Enums](#-enums)
- [Snapshot](#-snapshot)
- [Indexes](#-indexes)

---

## ğŸ“„ Schema

```typescript
interface IBooking extends Document {
  bookingNumber: string; // BKG-YYYYMMDD-####
  guestId: ObjectId;
  itemType: BookingItemType;
  snapshot: BookingSnapshot; // Immutable data
  startDate: Date;
  endDate: Date;
  numberOfPersons: number;
  numberOfDays?: number;
  totalPrice: number;
  status: BookingStatus;
  paymentStatus: PaymentStatus;
  paymentMethod?: string;
  transactionId?: string;
  paidAt?: Date;
  cancelReason?: string;
  createdAt: Date;
  updatedAt: Date;
}
```

---

## ğŸ·ï¸ Enums

### BookingItemType

```typescript
enum BookingItemType {
  TRAVEL_PACK = 'TRAVEL_PACK',
  ACTIVITY = 'ACTIVITY',
  CAR = 'CAR',
}
```

### BookingStatus

```typescript
enum BookingStatus {
  PENDING = 'pending',
  CONFIRMED = 'confirmed',
  CANCELLED = 'cancelled',
  EXPIRED = 'expired',
}
```

### PaymentStatus

```typescript
enum PaymentStatus {
  UNPAID = 'unpaid',
  PAID = 'paid',
  REFUNDED = 'refunded',
  FAILED = 'failed',
}
```

---

## ğŸ“¸ Snapshot

```typescript
interface BookingSnapshot {
  itemId: string;
  title: string;
  description: string;
  price: number;
  imageUrl?: string;
  category?: string;
  duration?: string;
}
```

---

## ğŸ” Indexes

```javascript
// Unique booking number
{
  bookingNumber: 1;
} // unique

// Guest lookups
{
  guestId: 1;
}

// TTL for unpaid bookings
{
  createdAt: 1;
} // expireAfterSeconds: 86400, partial filter
```

---

_ğŸ“˜ Auto-generated by Copilot Documentation Architect â€” ExploreKG Server Project_
